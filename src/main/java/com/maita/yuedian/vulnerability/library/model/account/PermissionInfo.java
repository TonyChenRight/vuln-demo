package com.maita.yuedian.vulnerability.library.model.account;

import cn.hutool.core.bean.BeanUtil;
import cn.hutool.core.date.DateUtil;
import com.maita.yuedian.vulnerability.library.domain.SysResource;
import io.swagger.v3.oas.annotations.media.Schema;
import lombok.Data;

import java.util.Date;
import java.util.List;

@Data
public class PermissionInfo {

    /**
     * 自增id
     */
    @Schema(title = "ID", example = "1")
    private Long id;

    /**
     * 1-菜单 2-接口
     */
    @Schema(title = "类型 0-目录 1-菜单 2-接口", example = "1")
    private Integer type;

    /**
     * 编码
     */
    @Schema(title = "资源唯一编码", example = "xxx")
    private String code;

    /**
     * 名称
     */
    @Schema(title = "资源名称", example = "xxx")
    private String name;

    /**
     * 父级编码
     */
    @Schema(title = "资源父级编码", example = "xxx")
    private String parentCode;

    /**
     * 排序
     */
    @Schema(title = "资源排序，降序在前", example = "xxx")
    private Integer weight;

    /**
     * 状态 0:禁用 1:正常
     */
    @Schema(title = "状态 0:禁用 1:正常", example = "xxx")
    private Integer status;

    @Schema(title = "创建时间", example = "2023-12-07 10:10:10")
    private String createdAt;
    @Schema(title = "创建时间", example = "2023-12-07 10:10:10")
    private String updatedAt;

    /**
     * 创建人ID
     */
    @Schema(title = "创建人ID", example = "1")
    private Long creatorId;

    /**
     * 更新人ID
     */
    @Schema(title = "更新人ID", example = "1")
    private Long updaterId;

    /**
     * 创建人名称
     */
    @Schema(title = "创建人名称", example = "xxx")
    private String creatorName;

    /**
     * 更新人名称
     */
    @Schema(title = "更新人名称", example = "xxx")
    private String updaterName;

    @Schema(title = "菜单图标", example = "xxx")
    private String icon;
    @Schema(title = "前端路由", example = "xxx")
    private String router;
    /**
     * 状态0=不展示，1=展示
     */
    @Schema(title = "展示状态0=不展示，1=展示", example = "1")
    private Integer isShow;
    /**
     * 动态注册组件地址
     */
    @Schema(title = "动态注册组件地址", example = "xxx")
    private String viewPath;
    /**
     * 打开方式 1=内部打开 2=外部打开
     */
    @Schema(title = "打开方式 1=内部打开 2=外部打开", example = "1")
    private Integer openMode;

    @Schema(title = "权限编码集合", example = "[]")
    private List<String> perms;

    public PermissionInfo(SysResource resource) {
        BeanUtil.copyProperties(resource, this);
        SysResource.ResourceExtra extraInfo = resource.getExtraInfo();
        BeanUtil.copyProperties(extraInfo, this);
        this.createdAt = DateUtil.formatDateTime(new Date(resource.getCreatedTime()));
        this.updatedAt = DateUtil.formatDateTime(new Date(resource.getUpdatedTime()));
    }
}
