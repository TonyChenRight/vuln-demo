package com.maita.yuedian.vulnerability.library.domain;

import cn.hutool.core.bean.BeanUtil;
import com.baomidou.mybatisplus.annotation.IdType;
import com.baomidou.mybatisplus.annotation.TableField;
import com.baomidou.mybatisplus.annotation.TableId;
import com.baomidou.mybatisplus.annotation.TableName;
import java.io.Serializable;
import java.util.Date;

import com.maita.yuedian.vulnerability.library.model.ImportResult;
import com.maita.yuedian.vulnerability.library.model.UserInfo;
import com.maita.yuedian.vulnerability.library.model.custom.CustomEditParam;
import com.maita.yuedian.vulnerability.library.model.custom.CustomImportPreview;
import com.maita.yuedian.vulnerability.library.utils.FieldUtils;
import lombok.Getter;
import lombok.Setter;
import lombok.experimental.Accessors;

/**
 * <p>
 * 自定义表
 * </p>
 *
 * @author jason
 * @since 2024-12-03
 */
@Getter
@Setter
@Accessors(chain = true)
@TableName("vu_custom")
public class VuCustom implements Serializable {

    private static final long serialVersionUID = 1L;

    /**
     * ID
     */
    @TableId(value = "id", type = IdType.AUTO)
    private Long id;

    /**
     * 编号
     */
    @TableField("code")
    private String code;

    /**
     * 名称
     */
    @TableField("name")
    private String name;

    /**
     * 描述
     */
    @TableField("remark")
    private String remark;

    /**
     * 级别 1-低危 2-中危 3-高危 4-超危
     */
    @TableField("level")
    private Integer level;

    /**
     * 评分
     */
    @TableField("score")
    private String score;

    /**
     * 类型
     */
    @TableField("type")
    private String type;

    /**
     * 影响平台
     */
    @TableField("affect_platform")
    private String affectPlatform;

    /**
     * 影响产品
     */
    @TableField("affect_product")
    private String affectProduct;

    /**
     * 影响版本
     */
    @TableField("affect_version")
    private String affectVersion;

    /**
     * 修复方式
     */
    @TableField("repair_methods")
    private String repairMethods;

    /**
     * 其他编号
     */
    @TableField("other_code")
    private String otherCode;

    /**
     * 发布时间
     */
    @TableField("publish_time")
    private Long publishTime;

    /**
     * 更新时间
     */
    @TableField("modify_time")
    private Long modifyTime;

    /**
     * 创建时间
     */
    @TableField("created_time")
    private Long createdTime;

    /**
     * 更新时间
     */
    @TableField("updated_time")
    private Long updatedTime;

    /**
     * 创建人ID
     */
    @TableField("creator_id")
    private Long creatorId;

    /**
     * 更新人ID
     */
    @TableField("updater_id")
    private Long updaterId;

    /**
     * 创建人名称
     */
    @TableField("creator_name")
    private String creatorName;

    /**
     * 更新人名称
     */
    @TableField("updater_name")
    private String updaterName;

    public static VuCustom buildForInsert(CustomEditParam param, UserInfo user) {
        VuCustom custom =new VuCustom();
        FieldUtils.autoFill(param.getCode(), String.class, custom::setCode);
        FieldUtils.autoFill(param.getName(), String.class, custom::setName);
        FieldUtils.autoFill(param.getRemark(), String.class, custom::setRemark);
        FieldUtils.autoFill(param.getLevel(), Integer.class, custom::setLevel);
        FieldUtils.autoFill(param.getScore(), String.class, custom::setScore);
        FieldUtils.autoFill(param.getType(), String.class, custom::setType);
        FieldUtils.autoFill(param.getAffectPlatform(), String.class, custom::setAffectPlatform);
        FieldUtils.autoFill(param.getAffectProduct(), String.class, custom::setAffectProduct);
        FieldUtils.autoFill(param.getAffectVersion(), String.class, custom::setAffectVersion);
        FieldUtils.autoFill(param.getRepairMethods(), String.class, custom::setRepairMethods);
        FieldUtils.autoFill(param.getOtherCode(), String.class, custom::setOtherCode);
        FieldUtils.autoFill(param.getPublishTime(), Long.class, custom::setPublishTime);
//        FieldUtils.autoFill(param.getModifyTime(), Long.class, custom::setModifyTime);

        long timeMillis = System.currentTimeMillis();
        custom.setCreatedTime(timeMillis);
        custom.setUpdatedTime(timeMillis);
        custom.setCreatorId(user.getUserId());
        custom.setUpdaterId(user.getUserId());
        custom.setCreatorName(user.getName());
        custom.setUpdaterName(user.getName());
        custom.setModifyTime(timeMillis);
        return custom;
    }

    public static VuCustom buildForUpdate(VuCustom custom, CustomEditParam param, UserInfo user) {
        FieldUtils.autoFill(param.getCode(), String.class, custom::setCode);
        FieldUtils.autoFill(param.getName(), String.class, custom::setName);
        FieldUtils.autoFill(param.getRemark(), String.class, custom::setRemark);
        FieldUtils.autoFill(param.getLevel(), Integer.class, custom::setLevel);
        FieldUtils.autoFill(param.getScore(), String.class, custom::setScore);
        FieldUtils.autoFill(param.getType(), String.class, custom::setType);
        FieldUtils.autoFill(param.getAffectPlatform(), String.class, custom::setAffectPlatform);
        FieldUtils.autoFill(param.getAffectProduct(), String.class, custom::setAffectProduct);
        FieldUtils.autoFill(param.getAffectVersion(), String.class, custom::setAffectVersion);
        FieldUtils.autoFill(param.getRepairMethods(), String.class, custom::setRepairMethods);
        FieldUtils.autoFill(param.getOtherCode(), String.class, custom::setOtherCode);
        FieldUtils.autoFill(param.getPublishTime(), Long.class, custom::setPublishTime);
//        FieldUtils.autoFill(param.getModifyTime(), Long.class, custom::setModifyTime);

        long timeMillis = System.currentTimeMillis();
        custom.setUpdatedTime(timeMillis);
        custom.setUpdaterId(user.getUserId());
        custom.setUpdaterName(user.getName());
        custom.setModifyTime(timeMillis);
        return custom;
    }

    public static VuCustom buildForInsertImport(CustomImportPreview preview, UserInfo user) {
        VuCustom custom =new VuCustom();
        FieldUtils.autoFill(preview.getCode(), String.class, custom::setCode);
        FieldUtils.autoFill(preview.getName(), String.class, custom::setName);
        FieldUtils.autoFill(preview.getRemark(), String.class, custom::setRemark);
        FieldUtils.autoFill(preview.getLevel(), Integer.class, custom::setLevel);
        FieldUtils.autoFill(preview.getScore(), String.class, custom::setScore);
        FieldUtils.autoFill(preview.getType(), String.class, custom::setType);
        FieldUtils.autoFill(preview.getAffectPlatform(), String.class, custom::setAffectPlatform);
        FieldUtils.autoFill(preview.getAffectProduct(), String.class, custom::setAffectProduct);
        FieldUtils.autoFill(preview.getAffectVersion(), String.class, custom::setAffectVersion);
        FieldUtils.autoFill(preview.getRepairMethods(), String.class, custom::setRepairMethods);
        FieldUtils.autoFill(preview.getOtherCode(), String.class, custom::setOtherCode);
        FieldUtils.autoFill(preview.getPublishTime(), Long.class, custom::setPublishTime);
//        FieldUtils.autoFill(preview.getModifyTime(), Long.class, custom::setModifyTime);

        long timeMillis = System.currentTimeMillis();
        custom.setCreatedTime(timeMillis);
        custom.setUpdatedTime(timeMillis);
        custom.setCreatorId(user.getUserId());
        custom.setUpdaterId(user.getUserId());
        custom.setCreatorName(user.getName());
        custom.setUpdaterName(user.getName());
        custom.setModifyTime(timeMillis);
        return custom;
    }

    public static VuCustom buildForUpdateImport(VuCustom custom, CustomImportPreview preview, UserInfo user) {
        FieldUtils.autoFill(preview.getCode(), String.class, custom::setCode);
        FieldUtils.autoFill(preview.getName(), String.class, custom::setName);
        FieldUtils.autoFill(preview.getRemark(), String.class, custom::setRemark);
        FieldUtils.autoFill(preview.getLevel(), Integer.class, custom::setLevel);
        FieldUtils.autoFill(preview.getScore(), String.class, custom::setScore);
        FieldUtils.autoFill(preview.getType(), String.class, custom::setType);
        FieldUtils.autoFill(preview.getAffectPlatform(), String.class, custom::setAffectPlatform);
        FieldUtils.autoFill(preview.getAffectProduct(), String.class, custom::setAffectProduct);
        FieldUtils.autoFill(preview.getAffectVersion(), String.class, custom::setAffectVersion);
        FieldUtils.autoFill(preview.getRepairMethods(), String.class, custom::setRepairMethods);
        FieldUtils.autoFill(preview.getOtherCode(), String.class, custom::setOtherCode);
        FieldUtils.autoFill(preview.getPublishTime(), Long.class, custom::setPublishTime);
//        FieldUtils.autoFill(preview.getModifyTime(), Long.class, custom::setModifyTime);

        long timeMillis = System.currentTimeMillis();
        custom.setUpdatedTime(timeMillis);
        custom.setUpdaterId(user.getUserId());
        custom.setUpdaterName(user.getName());
        custom.setModifyTime(timeMillis);
        return custom;
    }

}
