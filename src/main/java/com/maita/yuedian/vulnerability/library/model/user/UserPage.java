package com.maita.yuedian.vulnerability.library.model.user;

import cn.hutool.core.bean.BeanUtil;
import cn.hutool.core.date.DateUtil;
import com.maita.yuedian.vulnerability.library.domain.SysUser;
import io.swagger.v3.oas.annotations.media.Schema;
import lombok.Data;

import java.util.Date;
import java.util.Map;

@Data
public class UserPage {

    @Schema(title = "用户ID", example = "1")
    private Long id;
    @Schema(title = "名称", example = "xxx")
    private String name;
    @Schema(title = "账号", example = "cccc")
    private String account;
    @Schema(title = "角色编码", example = "cccc")
    private String roleCode;
    @Schema(title = "角色名称", example = "cccc")
    private String roleName;
    @Schema(title = "状态 0-禁用 1-启用", example = "1")
    private Integer status;
    @Schema(title = "创建时间", example = "2023-12-07 10:10:10")
    private String createdAt;
    @Schema(title = "创建时间", example = "2023-12-07 10:10:10")
    private String updatedAt;
    @Schema(title = "创建人ID", example = "1")
    private Long creatorId;
    @Schema(title = "更新人ID", example = "1")
    private Long updaterId;
    @Schema(title = "创建人名称", example = "张三")
    private String creatorName;
    @Schema(title = "更新人名称", example = "张三")
    private String updaterName;

    public UserPage(SysUser sysUser, Map<String, String> roleCodeToNameMap) {
        BeanUtil.copyProperties(sysUser, this);
        this.createdAt = DateUtil.formatDateTime(new Date(sysUser.getCreatedTime()));
        this.updatedAt = DateUtil.formatDateTime(new Date(sysUser.getUpdatedTime()));
        this.roleName = roleCodeToNameMap.get(roleCode);
    }
}
