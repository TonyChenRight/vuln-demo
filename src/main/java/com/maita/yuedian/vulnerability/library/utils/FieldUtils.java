package com.maita.yuedian.vulnerability.library.utils;

import cn.hutool.core.util.StrUtil;

import java.util.ArrayList;
import java.util.List;
import java.util.function.Consumer;

public class FieldUtils {

    public static <T> void safeSet(T value, Consumer<T> consumer) {
        if (value != null) {
            consumer.accept(value);
        }
    }

    public static <T> void autoFill(T value, Class<T> originClass, Consumer<T> consumer) {
        if (value == null) {
            if (originClass == String.class) {
                consumer.accept((T)"");
            }else if (originClass == Integer.class) {
                consumer.accept((T)Integer.valueOf(0));
            }else if (originClass == Long.class) {
                consumer.accept((T)Long.valueOf(0L));
            }else if(originClass == List.class) {
                consumer.accept((T)new ArrayList<>());
            }
        }else {
            consumer.accept(value);
        }
    }

    public static String safeGetString(Object value) {
        return value == null ? null : value.toString();
    }

    public static String filterLikeCharacter(String text) {
        if (StrUtil.isBlank(text)) {
            return text;
        }
        return text.replaceAll("%", "\\\\%").replaceAll("_", "\\\\_");
    }
}
